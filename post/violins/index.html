<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.21" />
  <meta name="author" content="Katherine Wood">
  <meta name="description" content="Psychology Graduate Student">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">
    
  
  <link rel="stylesheet" href="../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../css/font-awesome.min.css">
  <link rel="stylesheet" href="../../css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="../../css/hugo-academic.css">
  

  <link rel="alternate" href="../../index.xml" type="application/rss+xml" title="Inattentional Coffee">
  <link rel="feed" href="../../index.xml" type="application/rss+xml" title="Inattentional Coffee">

  <link rel="icon" type="image/png" href="../../img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="../../img/apple-touch-icon.png">

  <link rel="canonical" href="../../post/violins/">

  

  <title>Data in the raw: Violin plots | Inattentional Coffee</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../">Inattentional Coffee</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="../../#posts">
            
            <span>Blog</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../#publications">
            
            <span>Publications</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../#about">
            
            <span>About</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../#cv">
            
            <span>CV</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Data in the raw: Violin plots</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2017-06-26 15:27:06 -0500 CDT" itemprop="datePublished">
      Mon, Jun 26, 2017
    </time>
  </span>

  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fviolins%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Data%20in%20the%20raw%3a%20Violin%20plots&amp;url=%2fpost%2fviolins%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fviolins%2f&amp;title=Data%20in%20the%20raw%3a%20Violin%20plots"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fviolins%2f&amp;title=Data%20in%20the%20raw%3a%20Violin%20plots"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Data%20in%20the%20raw%3a%20Violin%20plots&amp;body=%2fpost%2fviolins%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <p>One of the ways we can increase transparency in science, in addition to posting our data, materials, and pre-registering our methods, is to start including more information about our raw data in our write-ups and reports. One of the ways we can do this is just show it in a visualization.</p>
<p>The bar chart with error bars (usually <span class="math inline">\(\pm 1.96 \times\)</span> standard error for a 95% confidence interval) is a classic plot type, but it obscures a lot of information about the underlying distribution that generated it. Scatterplots and histograms show more of the raw distribution, but they can be messy and hard to cleanly overlay with summary statistics.</p>
<p>Fortunately, violin plots bring together the informativeness of a histogram with the cleanliness of a bar chart, and they can be easily overlaid with summary statistics, error bars, and other information without too much additional clutter.</p>
<pre class="r"><code>library(ggplot2)
library(dplyr)

set.seed(836)
dat &lt;- data.frame(&#39;condition&#39;=c(rep(&#39;t1&#39;, 30), rep(&#39;t2&#39;, 30)), 
                  &#39;value&#39;=c(rnorm(30, 10, 3), rnorm(30, 20, 7)))</code></pre>
<p>Here is the simplest incarnation of a violin plot, for two normally distributed groups:</p>
<pre class="r"><code>basic_violin &lt;- ggplot(data=dat, aes(x=condition, y=value)) +
  geom_violin(aes(fill=condition, color=condition)) +
  theme_minimal()

print(basic_violin)</code></pre>
<p><img src="../../"katherinemwood.github.io/"  # End your URL with a `/` trailing slash.post/violins_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>These might be more accurately called “jug” or “vase” plots, since they rarely make pretty violin shapes and more often tend to look like postmodern sculpture. Name aside, the violin plot is a rotated, symmetric kernel density plot that shows the density of points at different values. Where the plot is wide, there is a high density of points; where it is narrow, a low density of points (like height on a histogram). We can see here that group T1 is less variable than T2; T1’s violin is short and squat, meaning most of the points are massed in a small region. T2, on the other hand, is tall and narrow, meaning the points are spread thinner along a wider range of values</p>
<p>These guys looks a little sparse, though. Why don’t we dress them up a smidge?</p>
<p>Maybe you like a point mean and <span class="math inline">\(2*\)</span>SE error bars:</p>
<pre class="r"><code>errbar_lims &lt;- group_by(dat, condition) %&gt;% 
              summarize(mean=mean(value), se=sd(value)/sqrt(n()), 
                        upper=mean+(2*se), lower=mean-(2*se))

mean_se_violin &lt;- ggplot() +
  geom_violin(data=dat, aes(x=condition, y=value, fill=condition, color=condition)) +
  geom_point(data=errbar_lims, aes(x=condition, y=mean), size=3) +
  geom_errorbar(aes(x=errbar_lims$condition, ymax=errbar_lims$upper, 
                ymin=errbar_lims$lower), stat=&#39;identity&#39;, width=.25) +
  theme_minimal()

print(mean_se_violin)</code></pre>
<p><img src="../../"katherinemwood.github.io/"  # End your URL with a `/` trailing slash.post/violins_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Or maybe boxplots are your jam:</p>
<pre class="r"><code>boxplot_violin &lt;- ggplot(data=dat, aes(x=condition, y=value)) +
  geom_violin(aes(fill=condition, color=condition)) +
  geom_boxplot(width=.1, outlier.shape=NA) +
  theme_minimal()

print(boxplot_violin)</code></pre>
<p><img src="../../"katherinemwood.github.io/"  # End your URL with a `/` trailing slash.post/violins_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Here’s the way I like to do my violin plots, with each subject’s point plotted plus a horizontal line for the mean. I add a little horizontal jitter to each point to make things easier to see:</p>
<pre class="r"><code>scatter_violin &lt;- ggplot(data=dat, aes(x=condition, y=value)) +
  geom_violin(aes(fill=condition, color=condition)) +
  geom_crossbar(stat=&quot;summary&quot;, fun.y=mean, fun.ymax=mean, fun.ymin=mean, fatten=2, width=.5) +
  geom_point(color=&quot;black&quot;, size=1, position = position_jitter(w=0.05)) +
  theme_minimal()

print(scatter_violin)</code></pre>
<p><img src="../../"katherinemwood.github.io/"  # End your URL with a `/` trailing slash.post/violins_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>There are a few things I really like about violin plots. One, they add a lot more information without taking up any more space than a bar plot would. Two, they give you an intuitive way to look at the distributions of your data. I don’t think many of us are accustomed to seeing data this way, and it goes to show that even well-behaved data doesn’t necessarily look like we might expect. <code>t1</code> is just as normal as <code>t2</code>, but <code>t1</code> “looks” a lot more normal than <code>t2</code> does. You lose a lot of the characteristics of the data with a bar plot:</p>
<pre class="r"><code>bar_plot &lt;- ggplot(data=errbar_lims) +
  geom_bar(aes(x=condition, y=mean, fill=condition, color=condition), stat=&#39;identity&#39;, position=&#39;dodge&#39;) +
  geom_errorbar(aes(x=condition, ymax=upper, 
                    ymin=lower), stat=&#39;identity&#39;, width=.25) +
  theme_minimal()

print(bar_plot)</code></pre>
<p><img src="../../"katherinemwood.github.io/"  # End your URL with a `/` trailing slash.post/violins_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>It captures the broad strokes, to be sure, but a lot of the finer details disappear.</p>
<p>So there you go. Violin plots! Dress ’em up, dress ’em down. However you like them, they’re a nice plot type to have in your arsenal.</p>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="../../post/wrangling/"><span
      aria-hidden="true">&larr;</span> A Primer on Data Wrangling</a></li>
    

    
    <li class="next"><a href="../../post/notebooks/">Intro to R Notebooks <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'kmwblog';
    var disqus_identifier = '\/post\/violins\/';
    var disqus_title = 'Data in the raw: Violin plots';
    var disqus_url = '\/post\/violins\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Katherine &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="../../js/jquery-1.12.3.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="../../js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-100181660-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/r.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/python.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML"></script>
    

  </body>
</html>

